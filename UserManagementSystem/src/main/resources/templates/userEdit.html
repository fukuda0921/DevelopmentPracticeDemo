<!DOCTYPE html>
<html lang="en">
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ユーザー編集・削除</title>
    <link th:href="@{css/userEdit.css}" rel="stylesheet">
</head>

<body>
    <h2>ユーザー編集・削除</h2>

    <!-- ユーザー編集フォーム -->
	<form th:action="@{/home/userList/userEdit/{loginUserId}/{targetUserId}(loginUserId=${loginUserId}, targetUserId=${userEditDto.userId})}"
	      method="post"
	      th:object="${userEditDto}">
        <!-- hidden項目 -->
<!--		<input type="hidden" name="projectId" th:value="${userEditProjectDto.projectId}" />-->
		<input type="hidden" name="userId" th:field="*{userId}" />

        <!-- 氏名 -->
        <div>
            <label for="name">氏名:</label>
            <input type="text" id="name"  th:field="*{name}" />
            <span class="error-message" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
        </div>

        <!-- フリガナ -->
        <div>
            <label for="kana">フリガナ:</label>
            <input type="text" id="kana"  th:field="*{kana}"/>
            <span class="error-message" th:if="${#fields.hasErrors('kana')}" th:errors="*{kana}"></span>
        </div>

        <!-- メールアドレス -->
        <div>
            <label for="address">メールアドレス:</label>
            <input type="text" id="address"  th:field="*{address}"/>
            <span class="error-message" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></span>
        </div>

        <!-- 権限 -->
        <div>
            <label for="role">権限:</label>
            <select th:field="*{role}">
                <option value="1">管理者</option>
                <option value="2">一般</option>
            </select>
            <span class="error-message" th:if="${#fields.hasErrors('role')}" th:errors="*{role}"></span>
        </div>

        <!-- パスワード -->
        <div>
            <label for="password">パスワード:</label>
            <input type="password" id="password" th:field="*{password}" placeholder="変更する場合のみ入力" />
            <span class="error-message" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
        </div>

<!--		UserEditProjectDto-->
<!-- 案件情報の繰り返し表示 -->
<div th:each="project, iterStat : *{projects}">
    <!-- 案件名 -->
    <div>
        <label>案件名:</label>
        <input type="text" th:field="*{projects[__${iterStat.index}__].projectName}" />
        <span class="error-message"
              th:if="${#fields.hasErrors('projects[' + iterStat.index + '].projectName')}"
              th:errors="*{projects[__${iterStat.index}__].projectName}"></span>
    </div>

    <!-- リモート可否 -->
    <div>
        <label>リモート可否:</label>
        <select th:field="*{projects[__${iterStat.index}__].remoteAvailability}">
            <option value="1">フルリモート</option>
            <option value="2">リモート併用</option>
            <option value="3">常駐</option>
        </select>
        <span class="error-message"
              th:if="${#fields.hasErrors('projects[' + iterStat.index + '].remoteAvailability')}"
              th:errors="*{projects[__${iterStat.index}__].remoteAvailability}"></span>
    </div>

    <!-- 稼働場所 -->
    <div>
        <label>稼働場所:</label>
        <input type="text" th:field="*{projects[__${iterStat.index}__].workLocation}" />
    </div>

    <!-- 業務内容 -->
    <div>
        <label>業務内容:</label>
        <input type="text" th:field="*{projects[__${iterStat.index}__].jobDescription}" />
    </div>

    <!-- 使用言語 -->
    <div>
        <label>使用言語:</label>
        <input type="text" th:field="*{projects[__${iterStat.index}__].programmingLanguage}" />
    </div>

    <!-- 備考 -->
    <div>
        <label>備考:</label>
        <input type="text" th:field="*{projects[__${iterStat.index}__].remarks}" />
    </div>
</div>
        <!-- ボタン -->
        <div>
            <button type="submit" name="action" value="edit">登録</button>
            <button type="submit" name="action" value="delete">削除</button>
             <a th:href="@{/home/userList/{userId}(userId=${loginUserId})}">戻る</a>
        </div>
    </form>
</body>

</html>