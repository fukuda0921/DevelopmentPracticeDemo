<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
       PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
       "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.example.demo.dao.AttendanceListMapper">

<!-- userIdに紐づく勤怠情報を取得 -->
 <select id="findByUserId"  parameterType="int" resultType="com.example.demo.entity.AttendanceListEntity">
        SELECT
            a.attendance_id,
            a.user_id,
            a.start_date,
            a.leaving_date,
            a.start_time,
            a.leaving_time,
            a.operation_time,
            a.break_time,
            a.remarks,
            u.name
        FROM
            attendance_tbl a
        JOIN 
        	user_tbl u
        ON
        	a.user_id = u.user_id
        
        WHERE
            a.user_id = #{userId}
        AND
        	a.delete_flag = 0
        ORDER BY
            a.attendance_id; 
    </select>
	
	
</mapper>